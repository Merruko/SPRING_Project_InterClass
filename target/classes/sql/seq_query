CREATE SEQUENCE SEQ_MEM
START WITH 1
MAXVALUE 999
MINVALUE 1
CYCLE
CACHE 10
NOORDER
;

CREATE OR REPLACE PROCEDURE SZP_MEM_RESET(SEQ_NAME IN VARCHAR2)
IS
    L_VAL NUMBER;
BEGIN
 
    EXECUTE IMMEDIATE 'SELECT '|| SEQ_NAME ||'.NEXTVAL FROM DUAL' INTO L_VAL;
    
    EXECUTE IMMEDIATE 'ALTER SEQUENCE '|| SEQ_NAME ||' INCREMENT BY -'|| L_VAL ||' MINVALUE 0';
    
    EXECUTE IMMEDIATE 'SELECT '|| SEQ_NAME ||'.NEXTVAL FROM DUAL' INTO L_VAL;
    
    EXECUTE IMMEDIATE 'ALTER SEQUENCE '|| SEQ_NAME ||' INCREMENT BY 1 MINVALUE 0';
 
END;

CREATE OR REPLACE FUNCTION ZBF_GET_MEM(
    p_type in varchar2
) RETURN VARCHAR2
AS
     v_returnValue VARCHAR2(180);
BEGIN
 
    BEGIN
 
        select TO_CHAR(SYSDATE, 'YYMMDD') || LPAD(SEQ_MEM.nextval, 3, 0)
          into v_returnValue
          from dual;
 
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        v_returnValue := ' ';
      WHEN OTHERS THEN
        v_returnValue := ' ';
    END;
 
    RETURN v_returnValue;
END;


//위의 쿼리 실행완료 후 아래 쿼리 실행 정상작동확인바람
SELECT ZBF_GET_MEM('now') from DUAL;